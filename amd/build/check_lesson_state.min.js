define(["jquery","core/ajax"],function(t,s){return{init:function(e){const n=t("#preparing-gif-container"),i=t("#status-container");n.show(),function t(){s.call([{methodname:"local_lessonation_check_state",args:{adhocid:e}}])[0].done(function(e){1===e[0].state?(n.hide(),i.html('<div class="alert alert-success">Lesson is ready! <a href="'+M.cfg.wwwroot+"/mod/lesson/view.php?id="+e[0].lessonid+'">Click here to view the lesson</a></div>')):setTimeout(t,5e3)}).fail(function(){n.hide(),i.html('<div class="alert alert-danger">Error checking lesson state.</div>')})}()}}});